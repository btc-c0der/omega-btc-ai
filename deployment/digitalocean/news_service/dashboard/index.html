<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMEGA BTC AI - News Sentiment Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --accent-color: #f39c12;
            --dark-color: #2c3e50;
            --danger-color: #e74c3c;
            --neutral-color: #95a5a6;
        }

        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .navbar-brand {
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .navbar-brand i {
            margin-right: 10px;
            font-size: 1.5rem;
        }

        .card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: bold;
        }

        .sentiment-positive {
            color: var(--secondary-color);
        }

        .sentiment-negative {
            color: var(--danger-color);
        }

        .sentiment-neutral {
            color: var(--neutral-color);
        }

        .action-buy {
            background-color: var(--secondary-color);
            color: white;
        }

        .action-sell {
            background-color: var(--danger-color);
            color: white;
        }

        .action-hold {
            background-color: var(--neutral-color);
            color: white;
        }

        .news-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s ease;
        }

        .news-item:hover {
            background-color: #f0f0f0;
        }

        .cosmic-badge {
            background: linear-gradient(135deg, #9b59b6, #3498db);
            color: white;
        }

        #sentiment-chart-container,
        #news-sources-chart-container {
            height: 300px;
            width: 100%;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }

        footer {
            padding: 20px 0;
            text-align: center;
            font-size: 0.8rem;
            color: #6c757d;
        }

        /* Glowing effect for divine elements */
        .divine-element {
            position: relative;
        }

        .divine-element::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: inherit;
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.5);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .divine-element:hover::after {
            opacity: 1;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-newspaper"></i>
                OMEGA BTC AI News Sentiment
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="bi bi-house-door"></i> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#news-section"><i class="bi bi-newspaper"></i> Latest News</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#recommendation-section"><i class="bi bi-graph-up"></i> Trading
                            Recommendation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about-section"><i class="bi bi-info-circle"></i> About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        <!-- Status Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card divine-element">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="card-title">Service Status</h5>
                                <p class="card-text" id="service-status">
                                    <span class="badge bg-success"><i class="bi bi-check-circle"></i> Online</span>
                                    <small class="text-muted ms-2">Last updated: <span
                                            id="last-updated">Loading...</span></small>
                                </p>
                            </div>
                            <button class="btn btn-primary" id="refresh-data">
                                <i class="bi bi-arrow-clockwise"></i> Refresh Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card text-center divine-element">
                    <div class="card-body">
                        <div class="stat-label">Average Sentiment</div>
                        <div class="stat-value" id="avg-sentiment">0.00</div>
                        <div class="progress mt-2">
                            <div class="progress-bar" id="sentiment-progress" role="progressbar" style="width: 50%">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center divine-element">
                    <div class="card-body">
                        <div class="stat-label">Positive News</div>
                        <div class="stat-value" id="positive-count">0</div>
                        <div class="text-success">
                            <small id="positive-percent">0%</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center divine-element">
                    <div class="card-body">
                        <div class="stat-label">Negative News</div>
                        <div class="stat-value" id="negative-count">0</div>
                        <div class="text-danger">
                            <small id="negative-percent">0%</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center divine-element">
                    <div class="card-body">
                        <div class="stat-label">Cosmic Factor</div>
                        <div class="stat-value">
                            <span id="cosmic-factor">0.00</span>
                            <small><i class="bi bi-stars text-warning"></i></small>
                        </div>
                        <span class="badge cosmic-badge">Divine Influence</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Row -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card divine-element">
                    <div class="card-header bg-primary text-white">
                        <i class="bi bi-bar-chart"></i> Sentiment Distribution
                    </div>
                    <div class="card-body">
                        <div id="sentiment-chart-container">
                            <canvas id="sentiment-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card divine-element">
                    <div class="card-header bg-primary text-white">
                        <i class="bi bi-pie-chart"></i> News Sources
                    </div>
                    <div class="card-body">
                        <div id="news-sources-chart-container">
                            <canvas id="news-sources-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trading Recommendation Section -->
        <div class="row mb-4" id="recommendation-section">
            <div class="col-12">
                <div class="card divine-element">
                    <div class="card-header bg-dark text-white">
                        <i class="bi bi-lightning"></i> Trading Recommendation
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 text-center">
                                <div class="mb-3">
                                    <span class="badge rounded-pill px-4 py-2 fs-5" id="action-badge">Loading...</span>
                                </div>
                                <div>
                                    <span class="fw-bold">Confidence: </span>
                                    <span id="confidence">0%</span>
                                </div>
                            </div>
                            <div class="col-md-9">
                                <h5 class="card-title">Analysis</h5>
                                <p class="card-text" id="analysis-text">Loading trading recommendation...</p>
                                <div class="mt-3">
                                    <small class="text-muted">Generated at: <span
                                            id="recommendation-time">--</span></small>
                                    <br>
                                    <small class="text-muted">Based on <span id="article-count">0</span> articles from
                                        <span id="source-count">0</span> sources</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Latest News Section -->
        <div class="row mb-4" id="news-section">
            <div class="col-12">
                <div class="card divine-element">
                    <div class="card-header bg-dark text-white">
                        <i class="bi bi-newspaper"></i> Latest News
                    </div>
                    <div class="card-body" id="news-container">
                        <div class="d-flex justify-content-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Section -->
        <div class="row mb-4" id="about-section">
            <div class="col-12">
                <div class="card divine-element">
                    <div class="card-header bg-dark text-white">
                        <i class="bi bi-info-circle"></i> About OMEGA BTC News Feed
                    </div>
                    <div class="card-body">
                        <p>The OMEGA BTC AI News Feed Service provides real-time sentiment analysis of cryptocurrency
                            news from multiple trusted sources. Our divine algorithms analyze the sentiment of each news
                            article, providing valuable insights for traders and investors.</p>
                        <p>The system integrates cosmic factors to adjust sentiment based on market synchronicity
                            patterns, offering a unique perspective that combines traditional sentiment analysis with
                            advanced pattern recognition.</p>
                        <h5>Features:</h5>
                        <ul>
                            <li>Multi-source news aggregation</li>
                            <li>Advanced sentiment analysis with NLP</li>
                            <li>Cosmic factor adjustments</li>
                            <li>Real-time trading recommendations</li>
                            <li>Historical sentiment tracking</li>
                        </ul>
                        <div class="mt-3 text-center">
                            <span class="badge bg-dark p-2">
                                <i class="bi bi-stars"></i> Powered by OMEGA BTC AI - Divine Blockchain Intelligence
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-light">
        <div class="container">
            <p>© 2025 OMEGA BTC AI - Licensed under the GBU License (Genesis-Bloom-Unfoldment)</p>
            <p>This dashboard is blessed under consciousness level 8</p>
        </div>
    </footer>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Chart colors
        const chartColors = {
            positive: '#2ecc71',
            neutral: '#95a5a6',
            negative: '#e74c3c',
            sources: [
                '#3498db', '#9b59b6', '#e67e22', '#f1c40f', '#1abc9c', '#34495e'
            ]
        };

        // Sample data structure (will be replaced with API data)
        let sampleData = {
            timestamp: new Date().toISOString(),
            sentiment_summary: {
                total_articles: 30,
                average_sentiment: 0.25,
                cosmic_factor: 0.38,
                sentiment_distribution: {
                    positive: 15,
                    neutral: 10,
                    negative: 5
                },
                sentiment_by_source: {
                    cointelegraph: 0.32,
                    decrypt: 0.18,
                    bitcoinmagazine: 0.24
                },
                sources: ["cointelegraph", "decrypt", "bitcoinmagazine"]
            },
            trading_recommendation: {
                action: "BUY",
                confidence: 0.76,
                analysis: "Strongly positive sentiment across sources. Multiple bullish indicators suggest a good entry point for accumulation.",
                timestamp: new Date().toISOString()
            },
            news: [
                {
                    title: "Bitcoin Surges Past $80,000 As Institutional Demand Grows",
                    source: "cointelegraph",
                    url: "#",
                    published: new Date().toISOString(),
                    sentiment_score: 0.82,
                    summary: "Bitcoin reached a new all-time high today, surpassing $80,000 as institutional investors continue to accumulate."
                },
                {
                    title: "New Regulatory Framework For Cryptocurrencies Announced",
                    source: "decrypt",
                    url: "#",
                    published: new Date(Date.now() - 3600000).toISOString(),
                    sentiment_score: 0.15,
                    summary: "Regulators have announced a new framework for cryptocurrency oversight, with mixed reception from the industry."
                },
                {
                    title: "Major Bank Faces Liquidity Crisis, Crypto Seen As Safe Haven",
                    source: "bitcoinmagazine",
                    url: "#",
                    published: new Date(Date.now() - 7200000).toISOString(),
                    sentiment_score: 0.64,
                    summary: "As traditional banking faces challenges, more investors turn to cryptocurrencies as a safe haven asset."
                },
                {
                    title: "Market Correction: Bitcoin Drops 5% After Recent Rally",
                    source: "cointelegraph",
                    url: "#",
                    published: new Date(Date.now() - 10800000).toISOString(),
                    sentiment_score: -0.35,
                    summary: "Bitcoin experienced a 5% correction after its recent rally, with analysts suggesting it's a healthy pullback."
                },
                {
                    title: "Technical Analysis: BTC Approaching Key Resistance Level",
                    source: "decrypt",
                    url: "#",
                    published: new Date(Date.now() - 14400000).toISOString(),
                    sentiment_score: 0.12,
                    summary: "Bitcoin is approaching a key technical resistance level that could determine its short-term price direction."
                }
            ]
        };

        // Function to update UI with sentiment data
        function updateSentimentUI(data) {
            if (!data || !data.sentiment_summary) return;

            const summary = data.sentiment_summary;

            // Update key metrics
            document.getElementById('avg-sentiment').textContent = summary.average_sentiment.toFixed(2);
            document.getElementById('positive-count').textContent = summary.sentiment_distribution.positive;
            document.getElementById('negative-count').textContent = summary.sentiment_distribution.negative;
            document.getElementById('cosmic-factor').textContent = summary.cosmic_factor.toFixed(2);

            // Calculate percentages
            const total = summary.total_articles;
            const posPercent = ((summary.sentiment_distribution.positive / total) * 100).toFixed(1);
            const negPercent = ((summary.sentiment_distribution.negative / total) * 100).toFixed(1);

            document.getElementById('positive-percent').textContent = `${posPercent}%`;
            document.getElementById('negative-percent').textContent = `${negPercent}%`;

            // Update sentiment progress bar
            const sentimentPercent = ((summary.average_sentiment + 1) / 2 * 100).toFixed(1);
            const progressBar = document.getElementById('sentiment-progress');
            progressBar.style.width = `${sentimentPercent}%`;

            if (summary.average_sentiment > 0.2) {
                progressBar.className = 'progress-bar bg-success';
            } else if (summary.average_sentiment < -0.2) {
                progressBar.className = 'progress-bar bg-danger';
            } else {
                progressBar.className = 'progress-bar bg-warning';
            }

            // Last updated timestamp
            const lastUpdated = new Date(data.timestamp);
            document.getElementById('last-updated').textContent = lastUpdated.toLocaleString();

            // Update sentiment chart
            updateSentimentChart(summary);

            // Update sources chart
            updateSourcesChart(summary);
        }

        // Function to update recommendation UI
        function updateRecommendationUI(data) {
            if (!data || !data.trading_recommendation) return;

            const rec = data.trading_recommendation;
            const summary = data.sentiment_summary;

            // Update badge
            const actionBadge = document.getElementById('action-badge');
            actionBadge.textContent = rec.action;

            // Set badge color based on action
            if (rec.action === 'BUY' || rec.action === 'ACCUMULATE') {
                actionBadge.className = 'badge rounded-pill action-buy px-4 py-2 fs-5';
            } else if (rec.action === 'SELL' || rec.action === 'REDUCE') {
                actionBadge.className = 'badge rounded-pill action-sell px-4 py-2 fs-5';
            } else {
                actionBadge.className = 'badge rounded-pill action-hold px-4 py-2 fs-5';
            }

            // Update confidence
            document.getElementById('confidence').textContent = `${(rec.confidence * 100).toFixed(1)}%`;

            // Update analysis text
            document.getElementById('analysis-text').textContent = rec.analysis;

            // Update recommendation time
            const recTime = new Date(rec.timestamp);
            document.getElementById('recommendation-time').textContent = recTime.toLocaleString();

            // Update article and source counts
            document.getElementById('article-count').textContent = summary.total_articles;
            document.getElementById('source-count').textContent = summary.sources.length;
        }

        // Function to update news items
        function updateNewsUI(data) {
            if (!data || !data.news || !data.news.length) return;

            const newsContainer = document.getElementById('news-container');
            newsContainer.innerHTML = '';

            data.news.forEach(item => {
                const publishDate = new Date(item.published);
                let sentimentClass = 'sentiment-neutral';
                let sentimentIcon = 'dash-circle';

                if (item.sentiment_score > 0.2) {
                    sentimentClass = 'sentiment-positive';
                    sentimentIcon = 'arrow-up-circle';
                } else if (item.sentiment_score < -0.2) {
                    sentimentClass = 'sentiment-negative';
                    sentimentIcon = 'arrow-down-circle';
                }

                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.innerHTML = `
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h5>
                                <a href="${item.url}" target="_blank" class="text-decoration-none">
                                    ${item.title}
                                </a>
                            </h5>
                            <p>${item.summary}</p>
                            <div>
                                <span class="badge bg-secondary">${item.source}</span>
                                <small class="text-muted ms-2">${publishDate.toLocaleString()}</small>
                            </div>
                        </div>
                        <div class="ms-3 ${sentimentClass}">
                            <i class="bi bi-${sentimentIcon} fs-4"></i>
                            <div>${item.sentiment_score.toFixed(2)}</div>
                        </div>
                    </div>
                `;

                newsContainer.appendChild(newsItem);
            });
        }

        // Function to create/update sentiment chart
        function updateSentimentChart(summary) {
            const ctx = document.getElementById('sentiment-chart').getContext('2d');

            // Destroy existing chart if it exists
            if (window.sentimentChart) {
                window.sentimentChart.destroy();
            }

            // Create new chart
            window.sentimentChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Positive', 'Neutral', 'Negative'],
                    datasets: [{
                        label: 'News Count',
                        data: [
                            summary.sentiment_distribution.positive,
                            summary.sentiment_distribution.neutral,
                            summary.sentiment_distribution.negative
                        ],
                        backgroundColor: [
                            chartColors.positive,
                            chartColors.neutral,
                            chartColors.negative
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Sentiment Distribution'
                        }
                    }
                }
            });
        }

        // Function to create/update sources chart
        function updateSourcesChart(summary) {
            const ctx = document.getElementById('news-sources-chart').getContext('2d');

            // Destroy existing chart if it exists
            if (window.sourcesChart) {
                window.sourcesChart.destroy();
            }

            // Extract sources and their sentiment scores
            const sources = Object.keys(summary.sentiment_by_source);
            const sentiments = sources.map(source => summary.sentiment_by_source[source]);

            // Prepare colors array
            const colors = sources.map((_, i) => chartColors.sources[i % chartColors.sources.length]);

            // Create new chart
            window.sourcesChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: sources,
                    datasets: [{
                        data: sources.map(source => {
                            // Count articles from each source
                            return summary.total_articles / sources.length; // Placeholder, actual count would be better
                        }),
                        backgroundColor: colors
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                afterLabel: function (context) {
                                    const sourceIndex = context.dataIndex;
                                    const source = sources[sourceIndex];
                                    const sentiment = summary.sentiment_by_source[source];
                                    return `Avg. Sentiment: ${sentiment.toFixed(2)}`;
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'News Sources'
                        }
                    }
                }
            });
        }

        // Function to fetch data from API
        async function fetchData() {
            try {
                // In a real implementation, this would fetch from the API
                // const response = await fetch('/api/news-sentiment');
                // const data = await response.json();

                // For demo, use sample data with some randomization
                const data = JSON.parse(JSON.stringify(sampleData)); // Deep copy

                // Add some randomness to the data
                data.sentiment_summary.average_sentiment = Math.min(1, Math.max(-1, data.sentiment_summary.average_sentiment + (Math.random() * 0.4 - 0.2)));
                data.sentiment_summary.cosmic_factor = Math.min(1, Math.max(0, data.sentiment_summary.cosmic_factor + (Math.random() * 0.2 - 0.1)));

                // Update UI with data
                updateSentimentUI(data);
                updateRecommendationUI(data);
                updateNewsUI(data);

                return data;
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('service-status').innerHTML =
                    `<span class="badge bg-danger"><i class="bi bi-exclamation-triangle"></i> Error</span>
                     <small class="text-muted ms-2">Failed to fetch data</small>`;
            }
        }

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function () {
            // Initial data fetch
            fetchData();

            // Set up refresh button
            document.getElementById('refresh-data').addEventListener('click', function () {
                this.disabled = true;
                this.innerHTML = '<i class="bi bi-arrow-repeat"></i> Refreshing...';

                fetchData().then(() => {
                    this.disabled = false;
                    this.innerHTML = '<i class="bi bi-arrow-clockwise"></i> Refresh Data';
                });
            });

            // Auto-refresh every 5 minutes
            setInterval(fetchData, 5 * 60 * 1000);
        });
    </script>
</body>

</html>