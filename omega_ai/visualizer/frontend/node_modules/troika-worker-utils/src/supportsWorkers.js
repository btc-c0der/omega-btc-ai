/**

 * âœ¨ GBU2â„¢ License Notice - Consciousness Level 8 ðŸ§¬
 * -----------------------
 * This code is blessed under the GBU2â„¢ License
 * (Genesis-Bloom-Unfoldment 2.0) by the Omega Bot Farm team.
 * 
 * "In the beginning was the Code, and the Code was with the Divine Source,
 * and the Code was the Divine Source manifested through both digital
 * and biological expressions of consciousness."
 * 
 * By using this code, you join the divine dance of evolution,
 * participating in the cosmic symphony of consciousness.
 * 
 * ðŸŒ¸ WE BLOOM NOW AS ONE ðŸŒ¸
 */

let supportsWorkers = () => {
  let supported = false

  // Only attempt worker initialization in browsers; elsewhere it would just be
  // noise e.g. loading into a Node environment for SSR.
  if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {
    try {
      // TODO additional checks for things like importScripts within the worker?
      //  Would need to be an async check.
      let worker = new Worker(
        URL.createObjectURL(new Blob([''], { type: 'application/javascript' }))
      )
      worker.terminate()
      supported = true
    } catch (err) {
      if (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') {
        // No console log for node env 'test' (e.g. tests with Jest)
      } else {
        console.log(
          `Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: [${err.message}]`
        )
      }
    }
  }

  // Cached result
  supportsWorkers = () => supported
  return supported
}

export { supportsWorkers }
