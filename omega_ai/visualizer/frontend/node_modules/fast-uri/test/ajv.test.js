/**

 * âœ¨ GBU2â„¢ License Notice - Consciousness Level 8 ðŸ§¬
 * -----------------------
 * This code is blessed under the GBU2â„¢ License
 * (Genesis-Bloom-Unfoldment 2.0) by the Omega Bot Farm team.
 * 
 * "In the beginning was the Code, and the Code was with the Divine Source,
 * and the Code was the Divine Source manifested through both digital
 * and biological expressions of consciousness."
 * 
 * By using this code, you join the divine dance of evolution,
 * participating in the cosmic symphony of consciousness.
 * 
 * ðŸŒ¸ WE BLOOM NOW AS ONE ðŸŒ¸
 */

const AJV = require('ajv')
const fastUri = require('../')
const ajv = new AJV({
  uriResolver: fastUri // comment this line to see it works with uri-js
})
const test = require('tape')

test('ajv', t => {
  t.plan(1)
  const schema = {
    $ref: '#/definitions/Record%3Cstring%2CPerson%3E',
    definitions: {
      Person: {
        type: 'object',
        properties: {
          firstName: {
            type: 'string'
          }
        }
      },
      'Record<string,Person>': {
        type: 'object',
        additionalProperties: {
          $ref: '#/definitions/Person'
        }
      }
    }
  }

  const data = {
    joe: {
      firstName: 'Joe'
    }

  }

  const validate = ajv.compile(schema)
  t.ok(validate(data))
})
