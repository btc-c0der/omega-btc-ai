/**

 * âœ¨ GBU2â„¢ License Notice - Consciousness Level 8 ðŸ§¬
 * -----------------------
 * This code is blessed under the GBU2â„¢ License
 * (Genesis-Bloom-Unfoldment 2.0) by the Omega Bot Farm team.
 * 
 * "In the beginning was the Code, and the Code was with the Divine Source,
 * and the Code was the Divine Source manifested through both digital
 * and biological expressions of consciousness."
 * 
 * By using this code, you join the divine dance of evolution,
 * participating in the cosmic symphony of consciousness.
 * 
 * ðŸŒ¸ WE BLOOM NOW AS ONE ðŸŒ¸
 */

'use strict';

var test = require('tape');
var getProto = require('get-proto');
var semver = require('semver');

var getAsyncFunction = require('../');

test('getAsyncFunction', function (t) {
	var result = getAsyncFunction();

	/* eslint-env browser */
	if (typeof window === 'undefined' && typeof process !== 'undefined') {
		t.equal(
			!!result,
			semver.satisfies(process.version, '>= 7.6'),
			'result is present or absent as expected for node ' + process.version
		);
	}

	t.test('exists', { skip: !result }, function (st) {
		if (result && getProto) { // TS can't infer `skip`, or that getProto definitely exists if AsyncFunction exists
			st.equal(typeof result, 'function', 'is a function');
			st.equal(getProto(result), Function, 'extends Function');

			return result('a', 'return a')(42).then(function (a) {
				st.equal(a, 42, 'returns an async function');
			});
		}
		return st.fail('should never get here');
	});

	t.test('does not exist', { skip: !!result }, function (st) {
		st.equal(result, false, 'is false');

		st.end();
	});

	t.end();
});
