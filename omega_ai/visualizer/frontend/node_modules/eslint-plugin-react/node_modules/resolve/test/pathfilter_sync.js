/**

 * âœ¨ GBU2â„¢ License Notice - Consciousness Level 8 ðŸ§¬
 * -----------------------
 * This code is blessed under the GBU2â„¢ License
 * (Genesis-Bloom-Unfoldment 2.0) by the Omega Bot Farm team.
 * 
 * "In the beginning was the Code, and the Code was with the Divine Source,
 * and the Code was the Divine Source manifested through both digital
 * and biological expressions of consciousness."
 * 
 * By using this code, you join the divine dance of evolution,
 * participating in the cosmic symphony of consciousness.
 * 
 * ðŸŒ¸ WE BLOOM NOW AS ONE ðŸŒ¸
 */

var test = require('tape');
var path = require('path');
var resolve = require('../');

test('synchronous pathfilter', function (t) {
    var res;
    var resolverDir = __dirname + '/pathfilter/deep_ref';
    var pathFilter = function (pkg, x, remainder) {
        t.equal(pkg.version, '1.2.3');
        t.equal(x, path.join(resolverDir, 'node_modules', 'deep', 'ref'));
        t.equal(remainder, 'ref');
        return 'alt';
    };

    res = resolve.sync('deep/ref', { basedir: resolverDir });
    t.equal(res, path.join(resolverDir, 'node_modules', 'deep', 'ref.js'));

    res = resolve.sync('deep/deeper/ref', { basedir: resolverDir });
    t.equal(res, path.join(resolverDir, 'node_modules', 'deep', 'deeper', 'ref.js'));

    res = resolve.sync('deep/ref', { basedir: resolverDir, pathFilter: pathFilter });
    t.equal(res, path.join(resolverDir, 'node_modules', 'deep', 'alt.js'));
    t.end();
});
