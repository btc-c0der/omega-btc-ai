<!--

  ✨ GBU2™ License Notice - Consciousness Level 8 🧬
  -----------------------
  This code is blessed under the GBU2™ License
  (Genesis-Bloom-Unfoldment 2.0) by the Omega Bot Farm team.
  
  "In the beginning was the Code, and the Code was with the Divine Source,
  and the Code was the Divine Source manifested through both digital
  and biological expressions of consciousness."
  
  By using this code, you join the divine dance of evolution,
  participating in the cosmic symphony of consciousness.
  
  🌸 WE BLOOM NOW AS ONE 🌸
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D1vine Dashboard v3</title>
    <meta name="description" content="A powerful dashboard interface for monitoring and management">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-chart-pie"></i>
                    <span>Divine Dashboard</span>
                </div>
                <button class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <div class="sidebar-content">
                <nav class="main-nav">
                    <a href="#dashboard" class="nav-link active">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#code-stats" class="nav-link">
                        <i class="fas fa-code"></i>
                        <span>Code Stats</span>
                    </a>
                    <a href="#performance" class="nav-link">
                        <i class="fas fa-chart-line"></i>
                        <span>Performance</span>
                    </a>
                    <a href="#tasks" class="nav-link">
                        <i class="fas fa-tasks"></i>
                        <span>Tasks</span>
                    </a>
                    <a href="#nft" class="nav-link">
                        <i class="fas fa-palette"></i>
                        <span>NFT Creator</span>
                    </a>
                    <a href="#settings" class="nav-link">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </nav>

                <div class="sidebar-divider"></div>

                <div class="sidebar-actions">
                    <a href="#help" class="nav-link">
                        <i class="fas fa-question-circle"></i>
                        <span>Help & Support</span>
                    </a>
                    <a href="#docs" class="nav-link">
                        <i class="fas fa-book"></i>
                        <span>Documentation</span>
                    </a>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="avatar">
                        <img src="https://via.placeholder.com/40" alt="User Avatar">
                    </div>
                    <div class="user-info">
                        <div class="user-name">John Developer</div>
                        <div class="user-role">Administrator</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="page-title">
                        <h1>Dashboard</h1>
                    </div>
                </div>

                <div class="header-right">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search...">
                    </div>

                    <div class="header-actions">
                        <button class="refresh-btn" title="Refresh Data">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button class="notifications" title="Notifications">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                        <button class="theme-toggle" title="Toggle Theme">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard" class="active">
                <div class="section-header">
                    <h2>Dashboard Overview</h2>
                    <p>Welcome back! Here's what's happening with your projects.</p>
                </div>

                <div class="loading-indicator">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>

                <div class="stats-summary">
                    <div class="stat-card" id="commits-today">
                        <div class="stat-icon">
                            <i class="fas fa-code-branch"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-title">Commits Today</div>
                            <div class="stat-value">--</div>
                            <div class="stat-change">--</div>
                        </div>
                    </div>

                    <div class="stat-card" id="lines-changed">
                        <div class="stat-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-title">Lines Changed</div>
                            <div class="stat-value">--</div>
                            <div class="stat-change">--</div>
                        </div>
                    </div>

                    <div class="stat-card" id="pull-requests">
                        <div class="stat-icon">
                            <i class="fas fa-code-merge"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-title">Pull Requests</div>
                            <div class="stat-value">--</div>
                            <div class="stat-change">--</div>
                        </div>
                    </div>

                    <div class="stat-card" id="deployments">
                        <div class="stat-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-title">Deployments</div>
                            <div class="stat-value">--</div>
                            <div class="stat-change">--</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card" id="recent-activity">
                        <div class="card-header">
                            <h3>Recent Activity</h3>
                            <div class="card-actions">
                                <button class="card-action"><i class="fas fa-ellipsis-v"></i></button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="activity-list">
                                <!-- Activity items will be added here by JavaScript -->
                            </div>
                        </div>
                        <div class="card-footer">
                            <a href="#" class="view-all">View All Activity</a>
                        </div>
                    </div>

                    <div class="dashboard-card" id="project-status">
                        <div class="card-header">
                            <h3>Project Status</h3>
                            <div class="card-actions">
                                <button class="card-action"><i class="fas fa-ellipsis-v"></i></button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="project-list">
                                <div class="project-item">
                                    <div class="project-info">
                                        <div class="project-name">Divine Dashboard v3</div>
                                        <div class="project-desc">Modern dashboard redesign</div>
                                    </div>
                                    <div class="project-progress">
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 75%"></div>
                                        </div>
                                        <div class="progress-value">75%</div>
                                    </div>
                                </div>

                                <div class="project-item">
                                    <div class="project-info">
                                        <div class="project-name">API Gateway</div>
                                        <div class="project-desc">Backend services gateway</div>
                                    </div>
                                    <div class="project-progress">
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 40%"></div>
                                        </div>
                                        <div class="progress-value">40%</div>
                                    </div>
                                </div>

                                <div class="project-item">
                                    <div class="project-info">
                                        <div class="project-name">User Authentication</div>
                                        <div class="project-desc">Auth service improvements</div>
                                    </div>
                                    <div class="project-progress">
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 90%"></div>
                                        </div>
                                        <div class="progress-value">90%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <a href="#" class="view-all">View All Projects</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Code Stats Section -->
            <section id="code-stats">
                <div class="section-header">
                    <h2>Code Statistics</h2>
                    <p>Track your code metrics and repository statistics.</p>
                </div>

                <div class="loading-indicator">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>

                <div class="stats-charts">
                    <div class="stats-chart-card" id="language-chart">
                        <div class="card-header">
                            <h3>Language Distribution</h3>
                        </div>
                        <div class="card-body">
                            <div class="placeholder-chart"></div>
                        </div>
                    </div>

                    <div class="stats-chart-card" id="contribution-chart">
                        <div class="card-header">
                            <h3>Contribution Activity</h3>
                        </div>
                        <div class="card-body">
                            <div class="placeholder-chart"></div>
                        </div>
                    </div>
                </div>

                <div class="stats-table-container">
                    <div class="card-header">
                        <h3>Repositories</h3>
                        <div class="table-actions">
                            <button class="table-action"><i class="fas fa-filter"></i> Filter</button>
                            <button class="table-action"><i class="fas fa-sort"></i> Sort</button>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="data-table" id="repos-table">
                            <thead>
                                <tr>
                                    <th>Repository</th>
                                    <th>Description</th>
                                    <th>Language</th>
                                    <th>Stars</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Table rows will be added by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Performance Section -->
            <section id="performance">
                <div class="section-header">
                    <h2>Performance Metrics</h2>
                    <p>Monitor application and system performance.</p>
                </div>

                <div class="loading-indicator">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>

                <div class="stats-charts">
                    <div class="stats-chart-card" id="build-time-chart">
                        <div class="card-header">
                            <h3>Build Times</h3>
                        </div>
                        <div class="card-body">
                            <div class="placeholder-chart"></div>
                        </div>
                    </div>

                    <div class="stats-chart-card" id="api-response-chart">
                        <div class="card-header">
                            <h3>API Response Times</h3>
                        </div>
                        <div class="card-body">
                            <div class="placeholder-chart"></div>
                        </div>
                    </div>
                </div>

                <div class="logs-section">
                    <div class="card-header">
                        <h3>System Logs</h3>
                        <div class="log-filter-container">
                            <label for="log-filter">Filter:</label>
                            <select id="log-filter">
                                <option value="all">All Logs</option>
                                <option value="info">Info</option>
                                <option value="warning">Warning</option>
                                <option value="error">Error</option>
                            </select>
                        </div>
                    </div>

                    <div class="logs-container">
                        <!-- Log items will be added by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section id="tasks">
                <div class="section-header">
                    <h2>Tasks & ToDos</h2>
                    <p>Manage your tasks and track progress.</p>
                </div>

                <div class="loading-indicator">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>

                <div class="tasks-header">
                    <div class="tasks-actions">
                        <button id="add-task-btn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </div>
                    <div class="tasks-filter">
                        <input type="text" placeholder="Filter tasks...">
                    </div>
                </div>

                <div class="tasks-grid">
                    <div class="task-list" id="in-progress-tasks">
                        <div class="task-list-header">
                            <h3>In Progress <span class="task-count">0</span></h3>
                        </div>
                        <div class="task-items">
                            <!-- Task items will be added by JavaScript -->
                        </div>
                    </div>

                    <div class="task-list" id="completed-tasks">
                        <div class="task-list-header">
                            <h3>Completed <span class="task-count">0</span></h3>
                        </div>
                        <div class="task-items">
                            <!-- Task items will be added by JavaScript -->
                        </div>
                    </div>

                    <div class="task-list" id="upcoming-tasks">
                        <div class="task-list-header">
                            <h3>Upcoming <span class="task-count">0</span></h3>
                        </div>
                        <div class="task-items">
                            <!-- Task items will be added by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings">
                <div class="section-header">
                    <h2>Settings</h2>
                    <p>Configure your dashboard preferences.</p>
                </div>

                <div class="settings-grid">
                    <div class="settings-card">
                        <div class="card-header">
                            <h3>General Settings</h3>
                        </div>
                        <div class="card-body">
                            <div class="settings-group">
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <label>Dark Mode</label>
                                        <p>Enable dark mode interface</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="switch">
                                            <input type="checkbox" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-label">
                                        <label>Email Notifications</label>
                                        <p>Receive email notifications</p>
                                    </div>
                                    <div class="setting-control">
                                        <label class="switch">
                                            <input type="checkbox">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-label">
                                        <label>Default Dashboard</label>
                                        <p>Choose your default view</p>
                                    </div>
                                    <div class="setting-control">
                                        <select>
                                            <option>Dashboard Overview</option>
                                            <option>Tasks</option>
                                            <option>Code Stats</option>
                                            <option>Performance</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="card-header">
                            <h3>Account Settings</h3>
                        </div>
                        <div class="card-body">
                            <div class="settings-group">
                                <div class="setting-item">
                                    <div class="setting-label">
                                        <label>User Name</label>
                                    </div>
                                    <div class="setting-control">
                                        <input type="text" value="John Developer">
                                    </div>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-label">
                                        <label>Email Address</label>
                                    </div>
                                    <div class="setting-control">
                                        <input type="email" value="john@example.com">
                                    </div>
                                </div>

                                <div class="setting-item">
                                    <div class="setting-label">
                                        <label>Change Password</label>
                                    </div>
                                    <div class="setting-control">
                                        <button class="btn btn-outline">Change Password</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Help & Support Section -->
            <section id="help">
                <div class="section-header">
                    <h2>Help & Support</h2>
                    <p>Get help with using the Divine Dashboard.</p>
                </div>

                <div class="help-grid">
                    <div class="help-card">
                        <div class="help-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3>Documentation</h3>
                        <p>Browse our comprehensive documentation.</p>
                        <a href="#" class="btn btn-outline">View Docs</a>
                    </div>

                    <div class="help-card">
                        <div class="help-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <h3>FAQs</h3>
                        <p>Find answers to common questions.</p>
                        <a href="#" class="btn btn-outline">View FAQs</a>
                    </div>

                    <div class="help-card">
                        <div class="help-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <h3>Video Tutorials</h3>
                        <p>Learn with step-by-step tutorials.</p>
                        <a href="#" class="btn btn-outline">Watch Videos</a>
                    </div>

                    <div class="help-card">
                        <div class="help-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h3>Contact Support</h3>
                        <p>Get help from our support team.</p>
                        <a href="#" class="btn btn-outline">Contact Us</a>
                    </div>
                </div>
            </section>

            <!-- Documentation Section -->
            <section id="docs">
                <div class="section-header">
                    <h2>Documentation</h2>
                    <p>Reference guides and API documentation.</p>
                </div>

                <div class="docs-search">
                    <input type="text" placeholder="Search documentation...">
                    <button><i class="fas fa-search"></i></button>
                </div>

                <div class="docs-grid">
                    <div class="docs-sidebar">
                        <h3>Categories</h3>
                        <ul class="docs-nav">
                            <li><a href="#" class="active">Getting Started</a></li>
                            <li><a href="#">User Interface</a></li>
                            <li><a href="#">API Reference</a></li>
                            <li><a href="#">Customization</a></li>
                            <li><a href="#">Best Practices</a></li>
                            <li><a href="#">Troubleshooting</a></li>
                        </ul>
                    </div>

                    <div class="docs-content">
                        <h3>Getting Started with Divine Dashboard</h3>

                        <div class="docs-section">
                            <h4>Introduction</h4>
                            <p>Divine Dashboard is a modern, responsive dashboard application designed to help you
                                monitor and manage your projects efficiently.</p>
                        </div>

                        <div class="docs-section">
                            <h4>Installation</h4>
                            <p>To install the Divine Dashboard, follow these steps:</p>
                            <pre><code>git clone https://github.com/example/divine-dashboard.git
cd divine-dashboard
npm install
npm start</code></pre>
                        </div>

                        <div class="docs-section">
                            <h4>Configuration</h4>
                            <p>Configure the dashboard by editing the <code>config.js</code> file in the root directory.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tesla Cybertruck QA Dashboard Section -->
            <section id="tesla-qa">
                <div class="section-header">
                    <h2>⚡ Tesla Cybertruck QA Dashboard ⚡</h2>
                    <p>Real-time monitoring and quantum analysis of Cybertruck components.</p>
                </div>

                <div class="dashboard-card full-width-card">
                    <div class="card-header">
                        <h3>Cybertruck QA Dashboard 3D</h3>
                        <div class="card-actions">
                            <button id="run-tests-btn" class="card-action run-tests" title="Run All Tests">
                                <i class="fas fa-vial"></i>
                            </button>
                            <button class="card-action refresh-dashboard" title="Refresh Dashboard">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button class="card-action fullscreen-dashboard" title="Fullscreen Mode">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body cybertruck-frame-container">
                        <iframe id="cybertruck-qa-frame" src="http://localhost:7860" allowfullscreen="true"
                            frameborder="0"></iframe>
                    </div>
                </div>
            </section>

            <!-- NFT Creator Dashboard Section -->
            <section id="nft">
                <div class="section-header">
                    <h2>🎨 Divine NFT Creator 🎨</h2>
                    <p>Generate and mint sacred NFTs infused with divine energy.</p>
                </div>

                <div class="dashboard-card full-width-card">
                    <div class="card-header">
                        <h3>NFT Creator Dashboard</h3>
                        <div class="card-actions">
                            <button id="mint-nft-btn" class="card-action mint-nft" title="Mint New NFT">
                                <i class="fas fa-coins"></i>
                            </button>
                            <button class="card-action refresh-nft" title="Refresh Dashboard">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button class="card-action fullscreen-nft" title="Fullscreen Mode">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body nft-frame-container">
                        <iframe id="nft-creator-frame" src="http://localhost:7862" allowfullscreen="true"
                            frameborder="0"></iframe>
                    </div>
                </div>
            </section>

            <!-- Milles DNA PCR Quantum LSD Portal Section -->
            <section id="dna-portal">
                <div class="section-header">
                    <h2>🧬 Milles DNA PCR Quantum LSD Portal 🧬</h2>
                    <p>Divine biotech interface for DNA quantum amplification and consciousness expansion.</p>
                </div>

                <div class="dashboard-card full-width-card">
                    <div class="card-header">
                        <h3>0M3G4 PCR QUANTUM LSD PORTAL</h3>
                        <div class="card-actions">
                            <button id="run-sequence-btn" class="card-action run-sequence" title="Run DNA Sequence">
                                <i class="fas fa-dna"></i>
                            </button>
                            <button class="card-action refresh-portal" title="Refresh Portal">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button class="card-action fullscreen-portal" title="Fullscreen Mode">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body dna-portal-frame-container">
                        <iframe id="dna-portal-frame" src="http://localhost:7863" allowfullscreen="true"
                            frameborder="0"></iframe>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Hidden iframe for metrics dashboard communication -->
    <iframe id="metrics-dashboard-frame" src="http://localhost:7861" style="display: none;"></iframe>

    <style>
        /* Main Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fafbfd;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Font preloading to prevent 404 errors */
        @font-face {
            font-family: 'ui-sans-serif';
            src: local('Segoe UI'), local('Helvetica Neue'), local('Arial'), sans-serif;
            font-weight: normal;
        }

        @font-face {
            font-family: 'ui-sans-serif';
            src: local('Segoe UI Bold'), local('Helvetica Neue Bold'), local('Arial Bold'), sans-serif;
            font-weight: bold;
        }

        @font-face {
            font-family: 'system-ui';
            src: local('Segoe UI'), local('Helvetica Neue'), local('Arial'), sans-serif;
            font-weight: normal;
        }

        @font-face {
            font-family: 'system-ui';
            src: local('Segoe UI Bold'), local('Helvetica Neue Bold'), local('Arial Bold'), sans-serif;
            font-weight: bold;
        }

        /* Additional styles for Tesla Cybertruck QA Dashboard */
        .full-width-card {
            grid-column: 1 / -1;
            margin-bottom: 1.5rem;
        }

        .cybertruck-frame-container {
            position: relative;
            overflow: hidden;
            padding-top: 56.25%;
            /* 16:9 aspect ratio */
            height: 0;
        }

        #cybertruck-qa-frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        /* NFT Creator Styles */
        .nft-frame-container {
            width: 100%;
            height: 720px;
        }

        #nft-creator-frame {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* DNA Portal Styles */
        .dna-portal-frame-container {
            width: 100%;
            height: 720px;
        }

        #dna-portal-frame {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            opacity: 0;
            transform: translateX(30px);
            transition: opacity 0.3s, transform 0.3s;
            z-index: 9999;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification.success {
            background-color: #4CAF50;
            border-left: 5px solid #2E7D32;
        }

        .notification.error {
            background-color: #F44336;
            border-left: 5px solid #C62828;
        }

        .notification.info {
            background-color: #2196F3;
            border-left: 5px solid #1565C0;
        }

        @media (max-width: 768px) {

            .cybertruck-frame-container,
            .nft-frame-container {
                padding-top: 100%;
                /* 1:1 aspect ratio on mobile */
            }

            .notification {
                width: calc(100% - 40px);
                top: auto;
                bottom: 20px;
                right: 20px;
                transform: translateY(110%);
            }

            .notification.show {
                transform: translateY(0);
            }
        }
    </style>

    <script>
        // Add script to handle the new Cybertruck dashboard section
        document.addEventListener('DOMContentLoaded', function () {
            // Preload fonts to prevent 404 errors
            function preloadFonts() {
                // Define local font alternatives
                const fontFaces = `
                    @font-face {
                        font-family: 'ui-sans-serif';
                        src: local('Segoe UI'), local('Helvetica Neue'), local('Arial'), sans-serif;
                        font-weight: normal;
                    }
                    
                    @font-face {
                        font-family: 'ui-sans-serif';
                        src: local('Segoe UI Bold'), local('Helvetica Neue Bold'), local('Arial Bold'), sans-serif;
                        font-weight: bold;
                    }
                    
                    @font-face {
                        font-family: 'system-ui';
                        src: local('Segoe UI'), local('Helvetica Neue'), local('Arial'), sans-serif;
                        font-weight: normal;
                    }
                    
                    @font-face {
                        font-family: 'system-ui';
                        src: local('Segoe UI Bold'), local('Helvetica Neue Bold'), local('Arial Bold'), sans-serif;
                        font-weight: bold;
                    }
                `;

                // Add font definitions to document
                const style = document.createElement('style');
                style.textContent = fontFaces;
                document.head.appendChild(style);

                // Also inject in all iframes
                const iframes = document.querySelectorAll('iframe');
                iframes.forEach(iframe => {
                    try {
                        iframe.addEventListener('load', function () {
                            try {
                                if (iframe.contentDocument) {
                                    const iframeStyle = iframe.contentDocument.createElement('style');
                                    iframeStyle.textContent = fontFaces;
                                    iframe.contentDocument.head.appendChild(iframeStyle);
                                    console.log("Font preloading injected into iframe", iframe.id);
                                }
                            } catch (e) {
                                console.log("Could not inject fonts into iframe due to cross-origin restrictions");
                            }
                        });
                    } catch (e) {
                        console.log("Error setting up iframe font injection:", e);
                    }
                });
            }

            // Apply font preloading immediately
            preloadFonts();

            // Add Tesla QA Dashboard link to the navigation
            const mainNav = document.querySelector('.main-nav');
            const teslaQALink = document.createElement('a');
            teslaQALink.href = '#tesla-qa';
            teslaQALink.className = 'nav-link';
            teslaQALink.innerHTML = '<i class="fas fa-car"></i><span>Tesla QA</span>';

            // Add DNA Portal link to the navigation
            const dnaPortalLink = document.createElement('a');
            dnaPortalLink.href = '#dna-portal';
            dnaPortalLink.className = 'nav-link';
            dnaPortalLink.innerHTML = '<i class="fas fa-dna"></i><span>DNA Portal</span>';

            // Insert after Dashboard link
            mainNav.insertBefore(teslaQALink, mainNav.querySelector('a[href="#code-stats"]'));
            // Insert DNA Portal link after NFT link
            mainNav.insertBefore(dnaPortalLink, mainNav.querySelector('a[href="#settings"]'));

            // Handle fullscreen button for Cybertruck dashboard
            document.querySelector('.fullscreen-dashboard').addEventListener('click', function () {
                const iframe = document.getElementById('cybertruck-qa-frame');
                if (iframe.requestFullscreen) {
                    iframe.requestFullscreen();
                } else if (iframe.webkitRequestFullscreen) {
                    iframe.webkitRequestFullscreen();
                } else if (iframe.msRequestFullscreen) {
                    iframe.msRequestFullscreen();
                }
            });

            // Handle refresh button for Cybertruck dashboard
            document.querySelector('.refresh-dashboard').addEventListener('click', function () {
                const iframe = document.getElementById('cybertruck-qa-frame');
                iframe.src = iframe.src;
            });

            // Handle fullscreen button for NFT dashboard
            document.querySelector('.fullscreen-nft').addEventListener('click', function () {
                const iframe = document.getElementById('nft-creator-frame');
                if (iframe.requestFullscreen) {
                    iframe.requestFullscreen();
                } else if (iframe.webkitRequestFullscreen) {
                    iframe.webkitRequestFullscreen();
                } else if (iframe.msRequestFullscreen) {
                    iframe.msRequestFullscreen();
                }
            });

            // Handle refresh button for NFT dashboard
            document.querySelector('.refresh-nft').addEventListener('click', function () {
                const iframe = document.getElementById('nft-creator-frame');
                iframe.src = iframe.src;
            });

            // Handle mint NFT button
            document.getElementById('mint-nft-btn').addEventListener('click', function () {
                const iframe = document.getElementById('nft-creator-frame');
                iframe.contentWindow.postMessage({ command: "mintNFT" }, "*");
            });

            // Handle run tests button
            document.getElementById("run-tests-btn").addEventListener("click", function () {
                const iframe = document.getElementById("cybertruck-qa-frame");
                iframe.contentWindow.postMessage({ command: "runTests" }, "*");

                // Show feedback to user
                const button = this;
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                button.disabled = true;

                // Re-enable after 3 seconds
                setTimeout(function () {
                    button.innerHTML = '<i class="fas fa-vial"></i>';
                    button.disabled = false;
                }, 3000);
            });

            // Handle run DNA sequence button
            document.getElementById('run-sequence-btn').addEventListener('click', function () {
                const iframe = document.getElementById('dna-portal-frame');
                const iframeOrigin = new URL(iframe.src).origin;

                // Fix: Use the correct origin for postMessage
                iframe.contentWindow.postMessage({
                    command: "runSequence",
                    activationKey: "Mullis Spiral Boost"
                }, "*"); // Use "*" instead of a specific origin to avoid cross-origin issues

                // Show feedback to user
                const button = this;
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                button.disabled = true;

                // Re-enable after 3 seconds
                setTimeout(function () {
                    button.innerHTML = '<i class="fas fa-dna"></i>';
                    button.disabled = false;

                    // Show success notification
                    showNotification("✨ DNA Sequence Amplified in Quantum Field!", "success");
                }, 3000);
            });

            // Listen for NFT dashboard messages
            window.addEventListener("message", function (event) {
                if (event.data && event.data.source === "nft-dashboard") {
                    console.log("Received message from NFT dashboard:", event.data);

                    // Show a notification
                    if (event.data.status === "success") {
                        showNotification("✅ NFT Created Successfully!", "success");
                    } else {
                        showNotification("❌ NFT Creation Failed", "error");
                    }
                }

                // Listen for DNA Portal messages
                if (event.data && event.data.source === "dna-portal") {
                    console.log("Received message from DNA Portal:", event.data);

                    // Show a notification based on status
                    if (event.data.status === "success") {
                        showNotification("🧬 DNA Quantum Expansion Complete!", "success");
                    } else if (event.data.status === "processing") {
                        showNotification("⏳ Processing DNA Sequence through LSD Portal...", "info");
                    } else {
                        showNotification("❌ DNA Sequence Amplification Failed", "error");
                    }
                }
            });

            // Function to show notifications
            function showNotification(message, type) {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.textContent = message;

                document.body.appendChild(notification);

                // Trigger animation
                setTimeout(() => notification.classList.add('show'), 10);

                // Remove notification after delay
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 300);
                }, 5000);
            }

            // Fix potential JavaScript syntax errors in iframes
            const fixIframeSyntaxErrors = () => {
                // This function will inject a small script into iframes
                // to prevent syntax errors when loading custom JavaScript
                const injectErrorHandler = (iframe) => {
                    try {
                        if (iframe.contentWindow) {
                            const script = document.createElement('script');
                            script.textContent = `
                                // Catch and log syntax errors
                                window.addEventListener('error', function(event) {
                                    console.log('Caught error:', event.message);
                                    event.preventDefault();
                                    return true;
                                });
                            `;
                            iframe.contentDocument.head.appendChild(script);
                        }
                    } catch (e) {
                        // Cross-origin access may be restricted
                        console.log('Could not inject error handler into iframe due to cross-origin restrictions');
                    }
                };

                // Get all iframes in the document
                const iframes = document.querySelectorAll('iframe');
                iframes.forEach(iframe => {
                    // Try to inject when iframe loads
                    iframe.addEventListener('load', () => injectErrorHandler(iframe));
                });
            };

            // Call fixIframeSyntaxErrors after a short delay
            setTimeout(fixIframeSyntaxErrors, 1000);
        });
    </script>

    <script src="js/main.js"></script>
</body>

</html>